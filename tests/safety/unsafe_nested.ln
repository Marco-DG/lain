// tests/safety/unsafe_nested.ln
// Test that unsafe blocks can be nested and work inside other structures.

proc main() {
    var p *int = 0
    
    // 1. Nested unsafe
    if 0 {
      unsafe {
          unsafe {
              var val int = *p// OK
          }
          var val2 int = *p// OK
      }
    }
    
    // 2. Unsafe inside control flow
    if 0 {
        unsafe {
            var val3 int = *p// OK
        }
    }
    
    // 3. Control flow inside unsafe
    unsafe {
        if 0 {
             var val4 int = *p// OK
        }
    }
}
