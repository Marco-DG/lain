extern proc libc_printf(fmt *u8, ...) int

type Point {
    x int
    y int
}

proc print_point(p Point) {
    // Shared reference: p is const Point*
    libc_printf("Point(%d, %d)\n", p.x, p.y)
}

proc move_point(mov p Point) Point {
    // Owned: p is Point (value)
    libc_printf("Moved Point(%d, %d)\n", p.x, p.y)
    return mov p
}

func mutate_point(var p Point) {
    // Mutable reference: p is Point*
    p.x = p.x + 1
    p.y = p.y + 1
}

proc main() int {
    var p1 Point
    p1.x = 10
    p1.y = 20
    
    // Test Shared Reference (implicit borrow)
    print_point(p1)
    
    // Test Mutable Reference (explicit var)
    mutate_point(var p1)
    print_point(p1) // Should be 11, 21
    
    // Test Move (explicit mov)
    move_point(mov p1)
    
    return 0
}
