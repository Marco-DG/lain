// 01_move_basic.ln
// Tests basic move semantics with 'mov' keyword.

type Resource {
    id int
}

func drop(mov {id} Resource) {
    // destruct to consume via parameter
}

func consume_helper(mov res Resource) int {
    val = res.id
    drop(mov res)
    return val
}

func consume(mov r Resource) {
    drop(mov r)
}

proc main() int {
    var a Resource
    a.id = 1
    var b = mov a    // Move a -> b
    
    // a is now invalid
    // var x = a.id // SHOULD ERROR: Use after move
    
    consume(mov b) // OK: Move b -> consume
    return 0
}
