// Test for borrow checking: should FAIL compilation
// Attempting to move while borrowed

type Resource {
    data int
}

func use_resource(r Resource) int {
    return r.data
}

func consume(mov r Resource) Resource {
    return mov r
}

func conflict(r Resource, mov r2 Resource) Resource {
    return mov r2
}

proc main() int {
    var res Resource
    res.data = 42
    
    // This should fail: borrowing and moving in the same call
    conflict(res, mov res)
    
    return 0
}
