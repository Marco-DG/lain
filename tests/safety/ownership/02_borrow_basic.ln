// 02_borrow_basic.ln
// Tests borrowing rules.

type Point {
    x int
    y int
}

func read(p Point) int {
    return p.x + p.y
}

func update(var p Point) {
    p.x = p.x + 1
}

proc main() int {
    var p Point = undefined
    p.x = 10
    p.y = 20
    
    // Shared borrow
    r1 = read(p)
    r2 = read(p)
    
    // Mutable borrow
    update(var p)
    
    return p.x // Should be 11
}
