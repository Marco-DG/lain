type Point {
    x int;
    y int;
}

func print_point(p Point) {
    // Shared reference: p is const Point*
    // Access fields via -> (handled by emitter)
    printf("Point(%d, %d)\n", p.x, p.y);
}

func move_point(mov p Point) Point {
    // Owned: p is Point (value)
    // Access fields via . (handled by emitter)
    printf("Moved Point(%d, %d)\n", p.x, p.y);
    return mov p;
}

func mutate_point(mut p Point) {
    // Mutable reference: p is Point*
    // Access fields via -> (handled by emitter)
    p.x = p.x + 1;
    p.y = p.y + 1;
}

func main() int {
    var p1 Point;
    p1.x = 10;
    p1.y = 20;
    
    // Test Shared Reference (implicit borrow)
    print_point(p1);
    
    // Test Mutable Reference (explicit mut)
    mutate_point(mut p1);
    print_point(p1); // Should be 11, 21
    
    // Test Move (explicit mov)
    move_point(mov p1);
    
    // p1 is consumed here (linearity check should catch use-after-move if implemented)
    // For now, we just verify C code generation correctness.
    return 0
}
