// Test for borrow checking: should FAIL compilation
// Attempting to move while borrowed

type Resource {
    data int
}

func use_resource(r Resource) int {
    return r.data
}

func consume_resource(mov r Resource) Resource {
    return mov r
}

func main() int {
    var res Resource
    res.data = 42
    
    // This should fail: borrowing while still borrowed
    // (Currently the checker may not catch this yet)
    var x = use_resource(res)    // shared borrow
    consume_resource(mov res)  // move while borrowed (ERROR)
    
    return x
}
