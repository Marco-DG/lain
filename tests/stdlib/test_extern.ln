extern proc abs(n int) int
extern proc malloc(size usize) mov *void
extern proc free(ptr mov *void)
extern proc exit(status int)

// Also test stdlib which uses extern
import std.io

proc main() int {
    println("Testing extern keyword...")

    // Test abs
    var n int = -42
    var res int = abs(n)
    if (res != 42) {
        println("Error: abs(-42) failed")
        return 1
    }
    println("abs(-42) = 42 (OK)")

    // Test malloc/free with proper ownership
    var ptr = malloc(10)
    // Free with explicit mov (ownership transfer)
    free(mov ptr)
    println("malloc and free (OK)")

    println("All extern tests passed.")
    exit(0)
    return 0
}
